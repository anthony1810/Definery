<mxGraphModel dx="1400" dy="800" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="1100" pageHeight="700" background="none" math="0" shadow="0">
  <root>
    <mxCell id="0"/>
    <mxCell id="1" parent="0"/>

    <!-- Title -->
    <mxCell id="2" value="&lt;b&gt;Three Pillars Pattern (ScreenStateKit)&lt;/b&gt;" style="text;html=1;fontSize=24;align=center;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#333333;" vertex="1" parent="1">
      <mxGeometry x="140" y="10" width="520" height="40" as="geometry"/>
    </mxCell>

    <!-- View Box (top) -->
    <mxCell id="3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;strokeWidth=2;arcSize=6;shadow=1;" vertex="1" parent="1">
      <mxGeometry x="120" y="60" width="560" height="120" as="geometry"/>
    </mxCell>
    <mxCell id="4" value="&lt;b&gt;View (SwiftUI)&lt;/b&gt;" style="text;html=1;fontSize=20;align=center;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#333333;" vertex="1" parent="1">
      <mxGeometry x="310" y="62" width="180" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="5" value="@State viewState: FeatureViewState&#xa;@State viewStore: FeatureViewStore&#xa;.onShowLoading($viewState.isLoading)&#xa;.onShowError($viewState.displayError)" style="text;html=1;fontSize=14;align=left;verticalAlign=top;fillColor=none;strokeColor=none;fontColor=#555555;fontFamily=Courier New;spacingLeft=12;" vertex="1" parent="1">
      <mxGeometry x="180" y="94" width="420" height="76" as="geometry"/>
    </mxCell>

    <!-- Arrow: View → State (owns) -->
    <mxCell id="6" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#6c8ebf;exitX=0.25;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="3" target="10">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>

    <!-- Arrow: View → ViewStore (dispatches) -->
    <mxCell id="7" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#6c8ebf;exitX=0.75;exitY=1;entryX=0.5;entryY=0;" edge="1" parent="1" source="3" target="16">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>

    <!-- "owns" label -->
    <mxCell id="8" value="&lt;i&gt;owns&lt;/i&gt;" style="text;html=1;fontSize=14;align=center;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#6c8ebf;" vertex="1" parent="1">
      <mxGeometry x="212" y="195" width="50" height="22" as="geometry"/>
    </mxCell>

    <!-- "dispatches" label -->
    <mxCell id="9" value="&lt;i&gt;dispatches&lt;/i&gt;" style="text;html=1;fontSize=14;align=center;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#6c8ebf;" vertex="1" parent="1">
      <mxGeometry x="524" y="195" width="80" height="22" as="geometry"/>
    </mxCell>

    <!-- State Box (bottom-left) -->
    <mxCell id="10" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;strokeWidth=2;arcSize=8;shadow=1;" vertex="1" parent="1">
      <mxGeometry x="40" y="240" width="280" height="170" as="geometry"/>
    </mxCell>
    <mxCell id="11" value="&lt;b&gt;State (ScreenState)&lt;/b&gt;" style="text;html=1;fontSize=20;align=center;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#333333;" vertex="1" parent="1">
      <mxGeometry x="70" y="244" width="220" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="12" value="@Observable" style="text;html=1;fontSize=13;fontStyle=2;align=center;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#d6b656;fontFamily=Courier New;" vertex="1" parent="1">
      <mxGeometry x="115" y="276" width="130" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="13" value="@MainActor" style="text;html=1;fontSize=13;fontStyle=2;align=center;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#d6b656;fontFamily=Courier New;" vertex="1" parent="1">
      <mxGeometry x="115" y="296" width="130" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="14" value="• isLoading (counter-based)&#xa;• displayError&#xa;• domain-specific data" style="text;html=1;fontSize=14;align=left;verticalAlign=top;fillColor=none;strokeColor=none;fontColor=#555555;spacingLeft=12;" vertex="1" parent="1">
      <mxGeometry x="55" y="322" width="250" height="72" as="geometry"/>
    </mxCell>

    <!-- ViewStore Box (bottom-right) -->
    <mxCell id="16" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=2;arcSize=8;shadow=1;" vertex="1" parent="1">
      <mxGeometry x="460" y="240" width="300" height="170" as="geometry"/>
    </mxCell>
    <mxCell id="17" value="&lt;b&gt;ViewStore (ScreenActionStore)&lt;/b&gt;" style="text;html=1;fontSize=20;align=center;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#333333;" vertex="1" parent="1">
      <mxGeometry x="470" y="244" width="280" height="30" as="geometry"/>
    </mxCell>
    <mxCell id="18" value="actor" style="text;html=1;fontSize=13;fontStyle=2;align=center;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#82b366;fontFamily=Courier New;" vertex="1" parent="1">
      <mxGeometry x="565" y="276" width="60" height="20" as="geometry"/>
    </mxCell>
    <mxCell id="19" value="• func binding(state:)&#xa;• func receive(action:)&#xa;• Services injected via init&#xa;• ActionLocker for dedup" style="text;html=1;fontSize=14;align=left;verticalAlign=top;fillColor=none;strokeColor=none;fontColor=#555555;spacingLeft=12;" vertex="1" parent="1">
      <mxGeometry x="475" y="302" width="260" height="90" as="geometry"/>
    </mxCell>

    <!-- Arrow: ViewStore → State (updates) -->
    <mxCell id="20" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#82b366;exitX=0;exitY=0.5;entryX=1;entryY=0.5;" edge="1" parent="1" source="16" target="10">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell id="21" value="&lt;i&gt;updates&lt;/i&gt;" style="text;html=1;fontSize=14;align=center;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#82b366;" vertex="1" parent="1">
      <mxGeometry x="352" y="310" width="70" height="22" as="geometry"/>
    </mxCell>

    <!-- Arrow: State → View (@Observable notifies) -->
    <mxCell id="22" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#d6b656;curved=1;exitX=0;exitY=0.3;entryX=0;entryY=0.5;" edge="1" parent="1" source="10" target="3">
      <mxGeometry relative="1" as="geometry">
        <Array as="points">
          <mxPoint x="10" y="291"/>
          <mxPoint x="10" y="120"/>
        </Array>
      </mxGeometry>
    </mxCell>
    <mxCell id="23" value="&lt;i&gt;@Observable&#xa;notifies&lt;/i&gt;" style="text;html=1;fontSize=13;align=right;verticalAlign=middle;fillColor=none;strokeColor=none;fontColor=#d6b656;" vertex="1" parent="1">
      <mxGeometry x="16" y="190" width="80" height="36" as="geometry"/>
    </mxCell>

  </root>
</mxGraphModel>
